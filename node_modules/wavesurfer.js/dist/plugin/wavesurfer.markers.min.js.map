{"version":3,"file":"wavesurfer.markers.min.js","mappings":"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","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/./src/plugin/markers/index.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"markers\"] = factory();\n})(self, () => {\nreturn ","/**\n * @typedef {Object} MarkerParams\n * @desc The parameters used to describe a marker.\n * @example wavesurfer.addMarker(regionParams);\n * @property {number} time The time to set the marker at\n * @property {?label} string An optional marker label\n * @property {?tooltip} string An optional marker tooltip\n * @property {?color} string Background color for marker\n * @property {?position} string \"top\" or \"bottom\", defaults to \"bottom\"\n * @property {?markerElement} element An HTML element to display instead of the default marker image\n * @property {?draggable} boolean Set marker as draggable, defaults to false\n * @property {?boolean} preventContextMenu Determines whether the context menu\n * is prevented from being opened, defaults to false\n */\n\n\n/**\n * Markers are points in time in the audio that can be jumped to.\n *\n * @implements {PluginClass}\n *\n * @example\n * import MarkersPlugin from 'wavesurfer.markers.js';\n *\n * // if you are using <script> tags\n * var MarkerPlugin = window.WaveSurfer.markers;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     MarkersPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\n\nconst DEFAULT_FILL_COLOR = \"#D8D8D8\";\nconst DEFAULT_POSITION = \"bottom\";\n\nexport default class MarkersPlugin {\n    /**\n     * @typedef {Object} MarkersPluginParams\n     * @property {?MarkerParams[]} markers Initial set of markers\n     * @fires MarkersPlugin#marker-click\n     * @fires MarkersPlugin#marker-drag\n     * @fires MarkersPlugin#marker-drop\n     */\n\n    /**\n     * Markers plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {MarkersPluginParams} params parameters use to initialise the plugin\n     * @since 4.6.0\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'markers',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                addMarker(options) {\n                    if (!this.initialisedPluginList.markers) {\n                        this.initPlugin('markers');\n                    }\n                    return this.markers.add(options);\n                },\n                getMarkers() {\n                    return this.markers;\n                },\n                clearMarkers() {\n                    this.markers && this.markers.clear();\n                }\n            },\n            instance: MarkersPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n        this.style = this.util.style;\n        this.markerLineWidth = 1;\n        this.markerWidth = 11;\n        this.markerHeight = 22;\n        this.dragging = false;\n\n\n        this._onResize = () => {\n            this._updateMarkerPositions();\n        };\n\n        this._onBackendCreated = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            if (this.params.markers) {\n                this.params.markers.forEach(marker => this.add(marker));\n            }\n            window.addEventListener('resize', this._onResize, true);\n            window.addEventListener('orientationchange', this._onResize, true);\n            this.wavesurfer.on('zoom', this._onResize);\n\n            if (!this.markers.find(marker => marker.draggable)){\n                return;\n            }\n\n            this.onMouseMove = (e) => this._onMouseMove(e);\n            window.addEventListener('mousemove', this.onMouseMove);\n\n            this.onMouseUp = (e) => this._onMouseUp(e);\n            window.addEventListener(\"mouseup\", this.onMouseUp);\n        };\n\n        this.markers = [];\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            this._updateMarkerPositions();\n        };\n    }\n\n    init() {\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\n        }\n    }\n\n    destroy() {\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n\n        this.wavesurfer.un('zoom', this._onResize);\n\n        window.removeEventListener('resize', this._onResize, true);\n        window.removeEventListener('orientationchange', this._onResize, true);\n\n        if (this.onMouseMove) {\n            window.removeEventListener('mousemove', this.onMouseMove);\n        }\n        if (this.onMouseUp) {\n            window.removeEventListener(\"mouseup\", this.onMouseUp);\n        }\n\n        this.clear();\n    }\n\n    /**\n     * Add a marker\n     *\n     * @param {MarkerParams} params Marker definition\n     * @return {object} The created marker\n     */\n    add(params) {\n        let marker = {\n            time: params.time,\n            label: params.label,\n            tooltip: params.tooltip,\n            color: params.color || DEFAULT_FILL_COLOR,\n            position: params.position || DEFAULT_POSITION,\n            draggable: !!params.draggable,\n            preventContextMenu: !!params.preventContextMenu\n        };\n\n        marker.el = this._createMarkerElement(marker, params.markerElement);\n\n        this.wrapper.appendChild(marker.el);\n        this.markers.push(marker);\n        this._updateMarkerPositions();\n\n        this._registerEvents();\n\n        return marker;\n    }\n\n    /**\n     * Remove a marker\n     *\n     * @param {number|Object} indexOrMarker Index of the marker to remove or the marker object itself\n     */\n    remove(indexOrMarker) {\n        let index = indexOrMarker;\n        if (isNaN(index)) {\n            index = this.markers.findIndex(marker => marker === indexOrMarker);\n        }\n        let marker = this.markers[index];\n        if (!marker) {\n            return;\n        }\n        let label = marker.el.getElementsByClassName(\"marker-label\")[0];\n        if (label) {\n            if (label._onContextMenu) {\n                label.removeEventListener(\"contextmenu\", label._onContextMenu);\n            }\n            if (label._onClick) {\n                label.removeEventListener(\"click\", label._onClick);\n            }\n            if (label._onMouseDown) {\n                label.removeEventListener(\"mousedown\", label._onMouseDown);\n            }\n        }\n\n        this.wrapper.removeChild(marker.el);\n        this.markers.splice(index, 1);\n\n        this._unregisterEvents();\n    }\n\n    _createPointerSVG(color, position) {\n        const svgNS = \"http://www.w3.org/2000/svg\";\n\n        const el = document.createElementNS(svgNS, \"svg\");\n        const polygon = document.createElementNS(svgNS, \"polygon\");\n\n        el.setAttribute(\"viewBox\", \"0 0 40 80\");\n\n        polygon.setAttribute(\"id\", \"polygon\");\n        polygon.setAttribute(\"stroke\", \"#979797\");\n        polygon.setAttribute(\"fill\", color);\n        polygon.setAttribute(\"points\", \"20 0 40 30 40 80 0 80 0 30\");\n        if ( position == \"top\" ) {\n            polygon.setAttribute(\"transform\", \"rotate(180, 20 40)\");\n        }\n\n        el.appendChild(polygon);\n\n        this.style(el, {\n            width: this.markerWidth + \"px\",\n            height: this.markerHeight + \"px\",\n            \"min-width\": this.markerWidth + \"px\",\n            \"margin-right\": \"5px\",\n            \"z-index\": 4\n        });\n        return el;\n    }\n\n    _createMarkerElement(marker, markerElement) {\n        let label = marker.label;\n        let tooltip = marker.tooltip;\n\n        const el = document.createElement('marker');\n        el.className = \"wavesurfer-marker\";\n\n        this.style(el, {\n            position: \"absolute\",\n            height: \"100%\",\n            display: \"flex\",\n            overflow: \"hidden\",\n            \"flex-direction\": (marker.position == \"top\" ? \"column-reverse\" : \"column\")\n        });\n\n        const line = document.createElement('div');\n        const width = markerElement ? markerElement.width : this.markerWidth;\n        marker.offset = (width - this.markerLineWidth) / 2;\n        this.style(line, {\n            \"flex-grow\": 1,\n            \"margin-left\": marker.offset + \"px\",\n            background: \"black\",\n            width: this.markerLineWidth + \"px\",\n            opacity: 0.1\n        });\n        el.appendChild(line);\n\n        const labelDiv = document.createElement('div');\n        const point = markerElement || this._createPointerSVG(marker.color, marker.position);\n        if (marker.draggable){\n            point.draggable = false;\n        }\n        labelDiv.appendChild(point);\n\n        if ( label ) {\n            const labelEl = document.createElement('span');\n            labelEl.innerText = label;\n            labelEl.setAttribute('title', tooltip);\n            this.style(labelEl, {\n                \"font-family\": \"inherit\",\n                \"font-size\": \"90%\"\n            });\n            labelDiv.appendChild(labelEl);\n        }\n\n        this.style(labelDiv, {\n            display: \"flex\",\n            \"align-items\": \"center\",\n            cursor: \"pointer\"\n        });\n        labelDiv.classList.add(\"marker-label\");\n\n        el.appendChild(labelDiv);\n\n        labelDiv._onClick = (e) => {\n            e.stopPropagation();\n            // Click event is caught when the marker-drop event was dispatched.\n            // Drop event was dispatched at this moment, but this.dragging\n            // is waiting for the next tick to set as false\n            if (this.dragging){\n                return;\n            }\n            this.wavesurfer.setCurrentTime(marker.time);\n            this.wavesurfer.fireEvent(\"marker-click\", marker, e);\n        };\n        labelDiv.addEventListener(\"click\", labelDiv._onClick);\n\n        labelDiv._onContextMenu = (e) => {\n            if (marker.preventContextMenu) {\n                e.preventDefault();\n            }\n            this.wavesurfer.fireEvent(\"marker-contextmenu\", marker, e);\n        };\n        labelDiv.addEventListener(\"contextmenu\", labelDiv._onContextMenu);\n\n        if (marker.draggable) {\n            labelDiv._onMouseDown = () => {\n                this.selectedMarker = marker;\n            };\n            labelDiv.addEventListener(\"mousedown\", labelDiv._onMouseDown);\n        }\n        return el;\n    }\n\n    _updateMarkerPositions() {\n        for ( let i = 0 ; i < this.markers.length; i++ ) {\n            let marker = this.markers[i];\n            this._updateMarkerPosition(marker);\n        }\n    }\n\n    /**\n     * Update a marker position based on its time property.\n     *\n     * @private\n     * @param {MarkerParams} params The marker to update.\n     * @returns {void}\n     */\n    _updateMarkerPosition(params) {\n        const duration = this.wavesurfer.getDuration();\n        const elementWidth =\n            this.wavesurfer.drawer.width /\n            this.wavesurfer.params.pixelRatio;\n\n        const positionPct = Math.min(params.time / duration, 1);\n        const leftPx = ((elementWidth * positionPct) - params.offset);\n        this.style(params.el, {\n            \"left\": leftPx + \"px\",\n            \"max-width\": (elementWidth - leftPx) + \"px\"\n        });\n    }\n\n    /**\n     * Fires `marker-drag` event, update the `time` property for the\n     * selected marker based on the mouse position, and calls to update\n     * its position.\n     *\n     * @private\n     * @param {MouseEvent} event The mouse event.\n     * @returns {void}\n     */\n    _onMouseMove(event) {\n        if (!this.selectedMarker){\n            return;\n        }\n        if (!this.dragging){\n            this.dragging = true;\n            this.wavesurfer.fireEvent(\"marker-drag\", this.selectedMarker, event);\n        }\n        this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * this.wavesurfer.getDuration();\n        this._updateMarkerPositions();\n    }\n\n    /**\n     * Fires `marker-drop` event and unselect the dragged marker.\n     *\n     * @private\n     * @param {MouseEvent} event The mouse event.\n     * @returns {void}\n     */\n    _onMouseUp(event) {\n        if (this.selectedMarker) {\n            setTimeout(() => {\n                this.selectedMarker = false;\n                this.dragging = false;\n            }, 0);\n        }\n\n        if (!this.dragging) {\n            return;\n        }\n\n        event.stopPropagation();\n        const duration = this.wavesurfer.getDuration();\n        this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * duration;\n        this._updateMarkerPositions();\n        this.wavesurfer.fireEvent(\"marker-drop\", this.selectedMarker, event);\n    }\n\n    _registerEvents() {\n        if (!this.markers.find(marker => marker.draggable)) {\n            return;\n        }\n        //we have some draggable markers, check for listeners\n        if (!this.onMouseMove) {\n            this.onMouseMove = (e) => this._onMouseMove(e);\n            window.addEventListener('mousemove', this.onMouseMove);\n        }\n\n        if (!this.onMouseUp) {\n            this.onMouseUp = (e) => this._onMouseUp(e);\n            window.addEventListener(\"mouseup\", this.onMouseUp);\n        }\n    }\n\n    _unregisterEvents() {\n        if (this.markers.find(marker => marker.draggable)) {\n            return;\n        }\n        //we don't have any draggable markers, unregister listeners\n        if (this.onMouseMove) {\n            window.removeEventListener('mousemove', this.onMouseMove);\n            this.onMouseMove = null;\n        }\n        if (this.onMouseUp) {\n            window.removeEventListener(\"mouseup\", this.onMouseUp);\n            this.onMouseUp = null;\n        }\n    }\n\n    /**\n     * Remove all markers\n     */\n    clear() {\n        while ( this.markers.length > 0 ) {\n            this.remove(0);\n        }\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(188);\n"],"names":["root","factory","exports","module","define","amd","self","MarkersPlugin","params","ws","_this","_classCallCheck","this","wavesurfer","util","style","markerLineWidth","markerWidth","markerHeight","dragging","_onResize","_updateMarkerPositions","_onBackendCreated","wrapper","drawer","markers","forEach","marker","add","window","addEventListener","on","find","draggable","onMouseMove","e","_onMouseMove","onMouseUp","_onMouseUp","_onReady","key","value","name","deferInit","staticProps","addMarker","options","initialisedPluginList","initPlugin","getMarkers","clearMarkers","clear","instance","isReady","once","un","removeEventListener","time","label","tooltip","color","position","preventContextMenu","el","_createMarkerElement","markerElement","appendChild","push","_registerEvents","indexOrMarker","index","isNaN","findIndex","getElementsByClassName","_onContextMenu","_onClick","_onMouseDown","removeChild","splice","_unregisterEvents","svgNS","document","createElementNS","polygon","setAttribute","width","height","_this2","createElement","className","display","overflow","line","offset","background","opacity","labelDiv","point","_createPointerSVG","labelEl","innerText","cursor","classList","stopPropagation","setCurrentTime","fireEvent","preventDefault","selectedMarker","i","length","_updateMarkerPosition","duration","getDuration","elementWidth","pixelRatio","leftPx","Math","min","event","handleEvent","_this3","setTimeout","_this4","remove","default","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}