{"version":3,"file":"wavesurfer.playhead.min.js","mappings":"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","sources":["webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/./src/plugin/playhead/index.js","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"playhead\"] = factory();\n})(self, () => {\nreturn ","\n/**\n * The playhead plugin separates the notion of the currently playing position from\n * a 'play-start' position.  Having a playhead enables a listening pattern\n * (commonly found in DAWs) that involves listening to a section of a track\n * repeatedly, rather than listening to an entire track in a linear fashion.\n *\n * @implements {PluginClass}\n *\n * @example\n * import PlayheadPlugin from 'wavesurfer.playhead.js';\n *\n * // if you are using <script> tags\n * var PlayheadPlugin = window.WaveSurfer.playhead;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     PlayheadPlugin.create({\n *        movePlayheadOnSeek: true,\n *        drawPlayhead: false,\n *        movePlayheadOnPause: false\n *     })\n *   ]\n * });\n */\n\nconst DEFAULT_FILL_COLOR = '#CF2F00';\n\nexport default class PlayheadPlugin {\n    /**\n     * @typedef {Object} PlayheadPluginParams\n     * @property {?boolean} draw=true Draw the playhead as a triangle/line\n     * @property {?boolean} moveOnSeek=true Seeking (via clicking) while playing moves the playhead\n     * @property {?boolean} returnOnPause=true Pausing the track returns the seek position to the playhead\n     */\n\n    /**\n     * Playhead plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {PlayheadPluginParams} params parameters use to initialise the plugin\n     * @since 5.0.0\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'playhead',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            instance: PlayheadPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.options = {};\n\n        ['draw', 'moveOnSeek', 'returnOnPause'].forEach(opt => {\n            if (opt in params) {\n                this.options[opt] = params[opt];\n            } else {\n                this.options[opt] = true;\n            }\n        });\n\n\n        this.wavesurfer = ws;\n        this.util = ws.util;\n        this.style = this.util.style;\n        this.markerWidth = 21;\n        this.markerHeight = 16;\n        this.playheadTime = 0;\n        this.unFuns = [];\n\n        this._onResize = () => {\n            this._updatePlayheadPosition();\n        };\n\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            this._updatePlayheadPosition();\n        };\n    }\n\n    _onBackendCreated() {\n        this.wrapper = this.wavesurfer.drawer.wrapper;\n\n        if (this.options.draw) {\n            this._createPlayheadElement();\n            window.addEventListener('resize', this._onResize, true);\n            window.addEventListener('orientationchange', this._onResize, true);\n\n            this.wavesurferOn('zoom', this._onResize);\n        }\n\n        this.wavesurferOn('pause', () => {\n            if ( this.options.returnOnPause ) {\n                this.wavesurfer.setCurrentTime(this.playheadTime);\n            }\n        });\n\n        this.wavesurferOn('seek', () => {\n            if ( this.options.moveOnSeek ) {\n                this.playheadTime = this.wavesurfer.getCurrentTime();\n                this._updatePlayheadPosition();\n            }\n        });\n\n        this.playheadTime = this.wavesurfer.getCurrentTime();\n    }\n\n    wavesurferOn(ev, fn) {\n        let ret = this.wavesurfer.on(ev, fn);\n        this.unFuns.push(() => {\n            this.wavesurfer.un(ev, fn);\n        });\n        return ret;\n    }\n\n    init() {\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            let r;\n\n            this.wavesurfer.once('ready', () => this._onReady());\n            this.wavesurfer.once('backend-created', () => this._onBackendCreated());\n        }\n    }\n\n    destroy() {\n        this.unFuns.forEach(f => f());\n        this.unFuns = [];\n\n        this.wrapper.removeChild(this.element);\n\n        window.removeEventListener('resize', this._onResize, true);\n        window.removeEventListener('orientationchange', this._onResize, true);\n    }\n\n    setPlayheadTime(time) {\n        this.playheadTime = time;\n\n        if (!this.wavesurfer.isPlaying()) {\n            this.wavesurfer.setCurrentTime(time);\n        }\n        this._updatePlayheadPosition();\n    }\n\n    _createPointerSVG() {\n        const svgNS = 'http://www.w3.org/2000/svg';\n\n        const el = document.createElementNS(svgNS, 'svg');\n        const path = document.createElementNS(svgNS, 'path');\n\n        el.setAttribute('viewBox', '0 0 33 30');\n        path.setAttribute('d', 'M16.75 31 31.705 5.566A3 3 0 0 0 29.146 1H4.354a3 3 0 0 0-2.56 4.566L16.75 31z');\n        path.setAttribute('stroke', '#979797');\n        path.setAttribute('fill', DEFAULT_FILL_COLOR);\n\n        el.appendChild(path);\n\n        this.style(el, {\n            width: this.markerWidth + 'px',\n            height: this.markerHeight + 'px',\n            cursor: 'pointer',\n            'z-index': 5\n        });\n        return el;\n    }\n\n    _createPlayheadElement() {\n        const el = document.createElement('playhead');\n        el.className = 'wavesurfer-playhead';\n\n        this.style(el, {\n            position: 'absolute',\n            height: '100%',\n            display: 'flex',\n            'flex-direction': 'column'\n        });\n\n        const pointer = this._createPointerSVG();\n        el.appendChild(pointer);\n\n        pointer.addEventListener('click', e => {\n            e.stopPropagation();\n            this.wavesurfer.setCurrentTime(this.playheadTime);\n        });\n\n        const line = document.createElement('div');\n        this.style(line, {\n            'flex-grow': 1,\n            'margin-left': (this.markerWidth / 2 - 0.5) + 'px',\n            background: 'black',\n            width: '1px',\n            opacity: 0.1\n        });\n\n        el.appendChild(line);\n\n        this.element = el;\n        this.wrapper.appendChild(el);\n    }\n\n    _updatePlayheadPosition() {\n        if (!this.element) {\n            return;\n        }\n\n        const duration = this.wavesurfer.getDuration();\n        const elementWidth =\n            this.wavesurfer.drawer.width /\n            this.wavesurfer.params.pixelRatio;\n\n        const positionPct = this.playheadTime / duration;\n        this.style(this.element, {\n            left: ((elementWidth * positionPct) - (this.markerWidth / 2)) + 'px'\n        });\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(374);\n"],"names":["root","factory","exports","module","define","amd","self","PlayheadPlugin","params","ws","_this","_classCallCheck","this","options","forEach","opt","wavesurfer","util","style","markerWidth","markerHeight","playheadTime","unFuns","_onResize","_updatePlayheadPosition","_onReady","wrapper","drawer","key","value","name","deferInit","instance","_this2","draw","_createPlayheadElement","window","addEventListener","wavesurferOn","returnOnPause","setCurrentTime","moveOnSeek","getCurrentTime","ev","fn","_this3","ret","on","push","un","_this4","isReady","_onBackendCreated","once","f","removeChild","element","removeEventListener","time","isPlaying","svgNS","el","document","createElementNS","path","setAttribute","appendChild","width","height","cursor","_this5","createElement","className","position","display","pointer","_createPointerSVG","e","stopPropagation","line","background","opacity","duration","getDuration","elementWidth","pixelRatio","positionPct","left","default","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"sourceRoot":""}